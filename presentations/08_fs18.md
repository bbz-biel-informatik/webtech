# Web-Technologie

## Animation & Interaktion



## Ablauf

* Beginn Projekt
* Streamserver



## Projekt

Ziel: Programmieren eines kleinen Javascript Spiels

[Kriterien](tests/test03_fs18.html)



## Gameloop

Ein Spiel besteht im wesentlichen aus zwei Komponenten:

* Spielsteuerung (Eingaben der Spieler)
  * Maus / Tastatur / ...
* Gamelogik
  * Verarbeiten der Spielereingaben
  * Updaten des Spielstatus
    * Updaten des Bildschrims
    * Updaten der Spielstände


## Gameloop

Um den Gamestatus regelmässig zu updaten, gibt es in Javascript eine unendliche Schleife, die nach jeder Ausführung eine gewisse Zeit wartet:

```js
window.setInterval( function() {
  // update gamestate
}, 16)
```

## Gameloop

Um den Gamestatus regelmässig zu updaten, gibt es in Javascript eine unendliche Schleife, die nach jeder Ausführung eine gewisse Zeit wartet:

```js
window.setInterval( function() {
  // update gamestate
}, 16)
```

Das menschliche Auge nimmt ca. 30 Bilder pro Sekunde wahr. Wenn wir also 60 Mal pro Sekunde updaten, erscheint das Bild flüssig und ohne Ruckler.

&rarr; `1000ms / 60 = 16.666ms`



## Gameboard

Auftrag:

* Erstelle eine Website (HTML & CSS) mit
  * einer Spielfeldabgrenzung (`600px` &times; `600px`)
  * 2 Spielerfiguren (bspw. vorerst ein Quadrat `24px` &times; `24px` + Farbe)
  * 10 Hindernissen/Zielen/Essen/... (bspw. vorerst ein Qaadrat `24px` &times; `24px` + andere Farben

Tipp: Verwende CSS-Klassen für Spieler und Hindernisse/Ziele/Essen...



## Spiellogik

* Spielsteuerung
  * abspeichern, wann eine Teste gedrückt ist und wann nicht

```js
$(document).on('keydown', function(e) {
  var key = e.key // bspw. 'x' wenn Taste x gedrückt
    // abspeichern, dass key gedrückt ist
})

$(document).on('keyup', function(e) {
  var key = e.key // bspw. 'x' wenn Taste x gedrückt
  // abspeichern, dass key losgelassen wurde
})
```


## Spiellogik: Tipp

Für das Abspeichern Arrays benutzen!

```js
var state = []
state['taste'] = true
console.log(state['taste']) // => true
```



Grundgerüst der Spiellogik:
* Verarbeiten der Spielereingaben
  * (Gameloop): Bspw. a: &larr; ; w: &uarr; ; s: &darr;; d: &rarr;
  * Im abgespeicherten Tastenzustand schauen, ob Tasten gedrückt ist, wenn ja, Position entsprechend manipulieren:
  
  ```js
  // player nach rechts verschieben
  $(PLAYER).css('left', '+=2')
  // player nach oben verschieben
  $(PLAYER).css('top', '-=2')
  ```



  ## Weitere Schritte

  [Übungen](exercises/exercise08_fs18.html)
